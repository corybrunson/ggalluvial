<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Changelog • ggalluvial</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Changelog"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-news">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ggalluvial</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.12.4</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../articles/ggalluvial.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/labels.html">Labeling small strata</a>
    </li>
    <li>
      <a href="../articles/order-rectangles.html">The Order of the Rectangles</a>
    </li>
    <li>
      <a href="../articles/shiny.html">Tooltips for ggalluvial plots in Shiny apps</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/corybrunson/ggalluvial/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
      <h1 data-toc-skip>Changelog <small></small></h1>
      <small>Source: <a href="https://github.com/corybrunson/ggalluvial/blob/HEAD/NEWS.md" class="external-link"><code>NEWS.md</code></a></small>
    </div>

    <div class="section level2">
<h2 class="page-header" data-toc-text="0.12.4" id="ggalluvial-0124">ggalluvial 0.12.4<small>2023-02-03</small><a class="anchor" aria-label="anchor" href="#ggalluvial-0124"></a></h2>
<div class="section level3">
<h3 id="linewidth-aesthetic-breaking-change-0-12-4">
<code>linewidth</code> aesthetic (breaking change)<a class="anchor" aria-label="anchor" href="#linewidth-aesthetic-breaking-change-0-12-4"></a></h3>
<p>An upcoming release of <em>ggplot2</em> controls stroke width using the new <code>linewidth</code> aesthetic rather than <code>size</code>. This release adapts to this change internally by updating row and column layers as recommended here: <a href="https://www.tidyverse.org/blog/2022/08/ggplot2-3-4-0-size-to-linewidth/" class="external-link uri">https://www.tidyverse.org/blog/2022/08/ggplot2-3-4-0-size-to-linewidth/</a></p>
</div>
<div class="section level3">
<h3 id="curve-constructors-0-12-4">Curve constructors<a class="anchor" aria-label="anchor" href="#curve-constructors-0-12-4"></a></h3>
<p>Various curve constructors for alluvia and flows are consolidated into <code><a href="../reference/geom_alluvium.html">data_to_alluvium()</a></code> and <code><a href="../reference/geom_flow.html">positions_to_flow()</a></code>, which are now exported to the user as well as used internally by <code>GeomAlluvium$draw_group</code> and <code>GeomFlow$draw_panel</code>, respectively.</p>
</div>
<div class="section level3">
<h3 id="error-handling-0-12-4">Error handling<a class="anchor" aria-label="anchor" href="#error-handling-0-12-4"></a></h3>
<p>Rather than throw an error when <code>y</code> values are <code>NA</code>, the stat layers now follow <strong>ggplot2</strong> convention, using <code><a href="https://ggplot2.tidyverse.org/reference/remove_missing.html" class="external-link">remove_missing()</a></code> at the setup step with the <code>na.rm</code> parameter passed to each layer.</p>
</div>
<div class="section level3">
<h3 id="aesthetic-defaults-0-12-4">Aesthetic defaults<a class="anchor" aria-label="anchor" href="#aesthetic-defaults-0-12-4"></a></h3>
<p>To address <a href="https://github.com/corybrunson/ggalluvial/issues/78" class="external-link">#78</a> and for clarity, the legacy default <code>colour = 0</code> of three <code>Geom*()</code>s is changed to <code>colour = "transparent"</code>.</p>
</div>
<div class="section level3">
<h3 id="skipping-examples-0-12-4">Skipping examples<a class="anchor" aria-label="anchor" href="#skipping-examples-0-12-4"></a></h3>
<p><code>\dontrun</code> markers have been replace by <code>\donttest</code>, per the advice here: <a href="https://stackoverflow.com/a/68936484/4556798" class="external-link uri">https://stackoverflow.com/a/68936484/4556798</a>. More have been added in order to reduce the time required to run.</p>
</div>
<div class="section level3">
<h3 id="vignette-revisions-0-12-4">Vignette revisions<a class="anchor" aria-label="anchor" href="#vignette-revisions-0-12-4"></a></h3>
<p>The primary vignette now uses the <code>HairEyeColor</code> data set, rather than over-using <code>Titanic</code>, to illustrate the parallel sets plot.</p>
<p>The Shiny vignette includes an embedded app using IFrame.</p>
</div>
<div class="section level3">
<h3 id="dependency-upgrades-0-12-4">Dependency upgrades<a class="anchor" aria-label="anchor" href="#dependency-upgrades-0-12-4"></a></h3>
<p>The deprecated <code>.dots</code> argument of <code><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">dplyr::group_by()</a></code> has been replaced with <code><a href="https://dplyr.tidyverse.org/reference/across.html" class="external-link">dplyr::across()</a></code>, preventing a warning.</p>
</div>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.12.3" id="ggalluvial-0123">ggalluvial 0.12.3<small>2020-12-05</small><a class="anchor" aria-label="anchor" href="#ggalluvial-0123"></a></h2>
<div class="section level3">
<h3 id="shiny-vignette-0-12-3">Shiny vignette<a class="anchor" aria-label="anchor" href="#shiny-vignette-0-12-3"></a></h3>
<p>A new vignette by Quentin D. Read shows how to build interactive Shiny apps with tooltips sensitive to the locations of graphical elements. This is especially important for the spline boundaries of flows and alluvia.</p>
</div>
<div class="section level3">
<h3 id="examples-using-vaccinations-data-0-12-3">Examples using <code>vaccinations</code> data<a class="anchor" aria-label="anchor" href="#examples-using-vaccinations-data-0-12-3"></a></h3>
<p>Corrections have been made to erroneous legacy code, found in one example and two vignettes, to reorder the factor levels of the <code>"response"</code> field in the data set <code>vaccinations</code>. The documentation is updated accordingly.</p>
<p>Also, an explanation of the (misleading) column names of this data set has been added to the main vignette.</p>
</div>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.12.2" id="ggalluvial-0122">ggalluvial 0.12.2<small>2020-08-30</small><a class="anchor" aria-label="anchor" href="#ggalluvial-0122"></a></h2>
<p>This patch addresses a bug introduced in v0.12.0 that had <code><a href="../reference/alluvial-data.html">is_lodes_form()</a></code> return an error when a data frame contains duplicate id-axis pairings, which may be appropriate for producing faceted plots. The new <code>site</code> parameter can be passed one or more grouping variables for this purpose, and internally it is passed <code>"PANEL"</code> to prevent this error from being thrown.</p>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.12.1" id="ggalluvial-0121">ggalluvial 0.12.1<small>2020-08-10</small><a class="anchor" aria-label="anchor" href="#ggalluvial-0121"></a></h2>
<p>This patch corrects a bug introduced in v0.12.0 that dropped missing values used internally by <code>StatFlow$compute_panel()</code> to keep track of flowless lodes. The problem was illustrated in issue <a href="https://github.com/corybrunson/ggalluvial/issues/64" class="external-link">#64</a>.</p>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.12.0" id="ggalluvial-0120">ggalluvial 0.12.0<small>2020-07-14</small><a class="anchor" aria-label="anchor" href="#ggalluvial-0120"></a></h2>
<div class="section level3">
<h3 id="data-sets-0-12-0">Data sets<a class="anchor" aria-label="anchor" href="#data-sets-0-12-0"></a></h3>
<p>Both installed data sets, <code>vaccinations</code> and <code>majors</code>, are better documented.</p>
<p>The <code>a</code> field of <code>vaccinations</code> (the within-survey fraction of respondents, which can be computed from the other fields) has been removed, and the <code>start_date</code> and <code>end_date</code> fields (<code>Date</code>s, obtained from the ALP website) have been added.</p>
</div>
<div class="section level3">
<h3 id="warning-and-error-messages-0-12-0">Warning and error messages<a class="anchor" aria-label="anchor" href="#warning-and-error-messages-0-12-0"></a></h3>
<p>The following changes broke no examples or tests but could change behavior in rare cases:</p>
<ul><li>
<code><a href="../reference/alluvial-data.html">is_lodes_form()</a></code> now returns <code>FALSE</code> if any axis-alluvium pairs are duplicated, and throws the previous warning as a message. This should be more helpful than the previous behavior of suppressing the warning and leaving <code><a href="https://tidyr.tidyverse.org/reference/gather.html" class="external-link">tidyr::gather()</a></code> to throw an error referring to rows of the already-transformed internal data.</li>
<li>Default aesthetic specifications <code>stratum = NULL</code> and <code>alluvium = NULL</code> have been added to the stats. This prevents the “unknown aesthetics” warnings that print when these aesthetics are passed to layers rather than to the plot initialization.</li>
</ul></div>
<div class="section level3">
<h3 id="ordering-of-lodesalluvia-0-12-0">Ordering of lodes/alluvia<a class="anchor" aria-label="anchor" href="#ordering-of-lodesalluvia-0-12-0"></a></h3>
<div class="section level4">
<h4 id="behavior-of-lodeordering-0-12-0">Behavior of <code>lode.ordering</code>
<a class="anchor" aria-label="anchor" href="#behavior-of-lodeordering-0-12-0"></a></h4>
<p>For consistency with the behavior of <code>aes.bind</code>, <code><a href="../reference/stat_alluvium.html">stat_alluvium()</a></code> now invokes <code>lode.ordering</code> together with <code>lode.guidance</code>: If the vectors of <code>lode.ordering</code> include duplicates, i.e. they do not completely determine an order, then the remaining deposits are used to refine the order. Previously, <code>lode.ordering</code> was assumed to consist of permutation vectors, so the two parameters were mutually exclusive.</p>
<p>Additionally, for consistency with other influences on the lode order, the vectors of <code>lode.ordering</code> are reversed if <code>reverse = TRUE</code> (the default). <strong>This will change some plots but will not produce new errors.</strong></p>
</div>
<div class="section level4">
<h4 id="controlling-lode-order-before-guidance-and-aesthetics-0-12-0">Controlling lode order before guidance and aesthetics<a class="anchor" aria-label="anchor" href="#controlling-lode-order-before-guidance-and-aesthetics-0-12-0"></a></h4>
<p>The <code>lode.ordering</code> parameter of <code><a href="../reference/stat_alluvium.html">stat_alluvium()</a></code> has been deprecated. Instead, the new <code>order</code> aesthetic gives priority to its argument over the differentiation aesthetics in arranging the lodes within each stratum, without producing graphical artifacts. This aesthetic can also be used in <code><a href="../reference/stat_flow.html">stat_flow()</a></code>.</p>
</div>
<div class="section level4">
<h4 id="order-of-alluvia-in-negative-strata-0-12-0">Order of alluvia in negative strata<a class="anchor" aria-label="anchor" href="#order-of-alluvia-in-negative-strata-0-12-0"></a></h4>
<p>Alluvia within “deposits” are now consistently ordered in positive and negative strata, rather than according to <code>absolute</code>. This avoids the “twisting” of flows between strata of different signs. Whereas the orderings of the deposits matter to the stacked-histogram reading of the plot, the orderings of the alluvia should simply maximize its elegance and readability. <strong>This will change some plots but will not produce new errors.</strong></p>
</div>
</div>
<div class="section level3">
<h3 id="computed-variables-0-12-0">Computed variables<a class="anchor" aria-label="anchor" href="#computed-variables-0-12-0"></a></h3>
<p>The alluvial stats now compute four variables for use with <code><a href="https://ggplot2.tidyverse.org/reference/aes_eval.html" class="external-link">after_stat()</a></code>: numeric variables <code>n</code>, <code>count</code>, and <code>prop</code>; and character variables <code>lode</code> (when the <code>alluvium</code> aesthetic is specified) and <code>flow</code> (when using the flow stat). The numerical variables can be weighted using the <code>weight</code> aesthetic, which is dropped during computation (so that it does not confuse the geoms), while <code>lode</code> is distilled according to a new <code>distill</code> parameter. This use of <code>weight</code> may cause confusion with its use by the <code>is_*_form()</code> functions until they are upgraded in the next version.</p>
<p>These new variables complement the already-computed but heretofore undocumented variables <code>stratum</code> and <code>deposit</code>. <code>stratum</code> obviates the need for the <code>infer.label</code> parameter, which is deprecated. Its alias, <code>label.strata</code>, is now defunct. (The variable <code>alluvium</code> is often computed, but it is manipulated to be used by the geom layers and should not be passed to an aesthetic.) <code>deposit</code> takes contiguous integer values forward along the axes and upward along the (signed) strata at each axis.</p>
</div>
<div class="section level3">
<h3 id="flow-upgrades-and-extensions-0-12-0">Flow upgrades and extensions<a class="anchor" aria-label="anchor" href="#flow-upgrades-and-extensions-0-12-0"></a></h3>
<p>The <code>knot.pos</code> parameter of <code><a href="../reference/geom_alluvium.html">geom_alluvium()</a></code> and <code><a href="../reference/geom_flow.html">geom_flow()</a></code> is now interpreted as a proportion of the total length of each flow, i.e. of the gap between adjacent strata (<em>not</em> axes). This means that values will vary with axis positions and stratum widths. Setting the new <code>knot.prop</code> parameter to <code>FALSE</code> prevents this by interpreting <code>knot.pos</code> as a constant value in the <code>x</code> direction.</p>
<p>These flows are rendered using <code><a href="https://rdrr.io/r/grid/grid.xspline.html" class="external-link">grid::xsplineGrob()</a></code> with four control points each: the endpoints and the two knots. To complement them, several other curves are now available: linear (equivalent to <code>knot.pos = 0</code>), cubic, quintic, sinusoidal, arctangent, and sigmoid, summoned by the new <code>curve_type</code> parameter (which defaults to the x-spline). (The asymptotic functions, arctangent and sigmoid, are compressed according to the new <code>curve_range</code> parameter.) The new curves are rendered piecewise linearly, with resolution controlled by the new <code>segments</code> parameter (similar to <code><a href="https://ggplot2.tidyverse.org/reference/stat_ellipse.html" class="external-link">ggplot2::stat_ellipse()</a></code>).</p>
</div>
<div class="section level3">
<h3 id="options-0-12-0">Options<a class="anchor" aria-label="anchor" href="#options-0-12-0"></a></h3>
<p>The stratum and lode ordering parameters now default to <code>NULL</code>, in which case they are reassigned to global options internally. This simplifies their documentation. The new curve parameters <code>curve_type</code>, <code>curve_range</code>, and <code>segments</code> can also be set as options and are documented in the same way.</p>
</div>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.11.3" id="ggalluvial-0113">ggalluvial 0.11.3<small>2020-04-16</small><a class="anchor" aria-label="anchor" href="#ggalluvial-0113"></a></h2>
<div class="section level3">
<h3 id="dependencies-0-11-3">Dependencies<a class="anchor" aria-label="anchor" href="#dependencies-0-11-3"></a></h3>
<p>In response to <strong>ggplot2</strong> v3.2.0, which removes the <strong>plyr</strong> dependency, the dependency has been removed from <strong>ggalluvial</strong> as well.</p>
</div>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.11.2" id="ggalluvial-0112">ggalluvial 0.11.2<a class="anchor" aria-label="anchor" href="#ggalluvial-0112"></a></h2>
<p>The function <code><a href="../reference/self-adjoin.html">self_adjoin()</a></code> is debugged for use with a continuous-valued <code>x</code> variable. An example, taking <code>x</code> to be the date of each vaccination survey in <code>vaccinations</code>, is documented with <code><a href="../reference/stat_stratum.html">stat_stratum()</a></code>.</p>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.11.1" id="ggalluvial-0111">ggalluvial 0.11.1<small>2019-12-03</small><a class="anchor" aria-label="anchor" href="#ggalluvial-0111"></a></h2>
<p>This patch fixes a bug with including negative observations in alluvia-form data due to outdated code that prohibited negative <code>y</code> values. This was discovered while drafting two examples of this usage, which are included in the documentation.</p>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.11.0" id="ggalluvial-0110">ggalluvial 0.11.0<a class="anchor" aria-label="anchor" href="#ggalluvial-0110"></a></h2>
<div class="section level3">
<h3 id="parameter-renamings-deprecations-and-additions-0-11-0">Parameter renamings, deprecations, and additions<a class="anchor" aria-label="anchor" href="#parameter-renamings-deprecations-and-additions-0-11-0"></a></h3>
<ul><li>The <code>min.height</code> and <code>max.height</code> parameters of <code><a href="../reference/stat_stratum.html">stat_stratum()</a></code> are deprecated in favor of <code>min.y</code> and <code>max.y</code> (which better adhere to <strong>ggplot2</strong> conventions) and extended to the other <code>stat_*()</code> layers.</li>
<li>The <code>label.strata</code> parameter of <code><a href="../reference/stat_stratum.html">stat_stratum()</a></code> is deprecated in favor of <code>infer.label</code>, which is extended to the other <code>stat_*()</code> layers and sets <code>label</code> to <code>alluvium</code> in those cases rather than to <code>stratum</code>.</li>
<li>The <code>aggregate.y</code> parameter of <code><a href="../reference/stat_alluvium.html">stat_alluvium()</a></code> is deprecated in favor of <code>cement.alluvia</code>, and the underlying procedure is debugged.</li>
<li>The <code>aes.bind</code> parameter of <code><a href="../reference/stat_flow.html">stat_flow()</a></code> and <code><a href="../reference/stat_alluvium.html">stat_alluvium()</a></code> now prefers character string options to logical values, described in the lode ordering vignette: <code>"none"</code>, <code>"flows"</code>, and <code>"alluvia"</code>. The default <code>"none"</code> produces different behavior than the previous default <code>FALSE</code>, in that under this setting the aesthetic variables are <em>not at all</em> prioritized.</li>
<li>The previously defunct stat parameters <code>weight</code> and <code>aggregate.wts</code> are discontinued.</li>
</ul></div>
<div class="section level3">
<h3 id="negative-observations-0-11-0">Negative observations<a class="anchor" aria-label="anchor" href="#negative-observations-0-11-0"></a></h3>
<p>Negative values can now be meaningfully passed to <code>y</code>, producing behavior that mimics that of <code><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html" class="external-link">geom_bar()</a></code>. The new logical parameter <code>absolute</code> controls whether negative strata, and lodes within them, are ordered vertically in the same way as positive strata and lodes (<code>FALSE</code>) or in the opposite way (<code>TRUE</code>). Additionally, the <code>negate.strata</code> parameter can be used to negate the observations associated with specific strata, in order to situate them below rather than above the <code>x</code> axis.</p>
</div>
<div class="section level3">
<h3 id="new-lode-guidance-function-0-11-0">New lode guidance function<a class="anchor" aria-label="anchor" href="#new-lode-guidance-function-0-11-0"></a></h3>
<p>The new lode guidance function <code><a href="../reference/lode-guidance-functions.html">lode_zagzig()</a></code> mimics the behavior of <code><a href="../reference/lode-guidance-functions.html">lode_zigzag()</a></code> except in initially “zagging” toward the farther end rather than “zigging” toward the closer end.</p>
</div>
<div class="section level3">
<h3 id="stat-layer-consistency-0-11-0">Stat layer consistency<a class="anchor" aria-label="anchor" href="#stat-layer-consistency-0-11-0"></a></h3>
<p><code>stat_*()</code> internals have been simplified and standardized, in particular the manner in which lodes are ordered within strata.</p>
</div>
<div class="section level3">
<h3 id="layer-tests-0-11-0">Layer tests<a class="anchor" aria-label="anchor" href="#layer-tests-0-11-0"></a></h3>
<p>Tests have been added for the statistical transformations. Visual regression tests using <strong>vdiffr</strong> have been added for the geoms.</p>
</div>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.10.0" id="ggalluvial-0100">ggalluvial 0.10.0<small>2019-09-02</small><a class="anchor" aria-label="anchor" href="#ggalluvial-0100"></a></h2>
<div class="section level3">
<h3 id="lode-guidance-and-ordering-0-10-0">Lode guidance and ordering<a class="anchor" aria-label="anchor" href="#lode-guidance-and-ordering-0-10-0"></a></h3>
<p>The lode guidance functions have been renamed as follows and their original names retained as aliases:</p>
<table class="table"><thead><tr class="header"><th>original</th>
<th>renamed</th>
</tr></thead><tbody><tr class="odd"><td>rightward</td>
<td>forward</td>
</tr><tr class="even"><td>leftward</td>
<td>backward</td>
</tr><tr class="odd"><td>rightleft</td>
<td>frontback</td>
</tr><tr class="even"><td>leftright</td>
<td>backfront</td>
</tr></tbody></table><p>Additionally, <code>lode.ordering</code> now accepts a single integer vector of length the number of cases (alluvia), and will use the vector to sort the lodes within strata at each axis.</p>
<p>Finally, a new vignette showcases this and related functionality using a small example.</p>
</div>
<div class="section level3">
<h3 id="defunct-parameters-0-10-0">Defunct parameters<a class="anchor" aria-label="anchor" href="#defunct-parameters-0-10-0"></a></h3>
<p>The following parameters, deprecated in previous versions, are now defunct (with informative messages):</p>
<ul><li>
<code>weight</code> in the <code>stat_*()</code>s (replaced with <code>y</code>)</li>
<li>
<code>aggregate.wts</code> in <code><a href="../reference/stat_alluvium.html">stat_alluvium()</a></code> (replaced with <code>aggregate.y</code>)</li>
<li>
<code>logical</code> in the <code>is_*_form()</code>s</li>
</ul></div>
<div class="section level3">
<h3 id="default-geom-layer-parameters-0-10-0">Default geom layer parameters<a class="anchor" aria-label="anchor" href="#default-geom-layer-parameters-0-10-0"></a></h3>
<p>The <code>width</code> and <code>knot.pos</code> parameters sometimes required by <code>Geom*$setup_data()</code> are now set to the same defaults as in the <code>geom_*()</code>s when called from a stat. Previously-implemented warnings have been removed.</p>
</div>
<div class="section level3">
<h3 id="custom-lode-guidance-functions-0-10-0">Custom lode guidance functions<a class="anchor" aria-label="anchor" href="#custom-lode-guidance-functions-0-10-0"></a></h3>
<p>The <code>lode.guidance</code> argument of <code>stat_alluvial()</code> now accepts functions as input, making the use of custom functions easier as demonstrated in an example.</p>
</div>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.9.2" id="ggalluvial-092">ggalluvial 0.9.2<a class="anchor" aria-label="anchor" href="#ggalluvial-092"></a></h2>
<div class="section level3">
<h3 id="height-limits-on-strata-0-9-2">Height limits on strata<a class="anchor" aria-label="anchor" href="#height-limits-on-strata-0-9-2"></a></h3>
<p>Parameters <code>min.height</code> and <code>max.height</code> are introduced to <code><a href="../reference/stat_stratum.html">stat_stratum()</a></code> to allow users to omit strata outside a given height range. This is probably most relevant for stratum labeling, as illustrated in the updated vignette.</p>
</div>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.9.1" id="ggalluvial-091">ggalluvial 0.9.1<small>2018-10-21</small><a class="anchor" aria-label="anchor" href="#ggalluvial-091"></a></h2>
<div class="section level3">
<h3 id="suggest-sessioninfo-for-session_info-0-9-1">Suggest <strong>sessioninfo</strong> for <code>session_info()</code>
<a class="anchor" aria-label="anchor" href="#suggest-sessioninfo-for-session_info-0-9-1"></a></h3>
<p>Because the only functional (e.g. out <code>README.md</code>) occurrence of <strong>devtools</strong> is to call <code>session_info()</code> at the ends of the vignettes, this suggestion and usage are switched to <strong>sessioninfo</strong>.</p>
</div>
<div class="section level3">
<h3 id="markdown-formatting-0-9-1">markdown formatting<a class="anchor" aria-label="anchor" href="#markdown-formatting-0-9-1"></a></h3>
<p>Documentation is slightly reformatted due to switching <strong>roxygen</strong> syntax to markdown.</p>
</div>
<div class="section level3">
<h3 id="z-ordering-patch-0-9-1">z-ordering patch<a class="anchor" aria-label="anchor" href="#z-ordering-patch-0-9-1"></a></h3>
<p>The internal z-ordering function <code>z_order_aes</code> failed to recognize contiguous segments of alluvia, thereby assigning later segments missing values of <code>'group'</code> and preventing them from being rendered. This has been corrected.</p>
</div>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.9.0" id="ggalluvial-090">ggalluvial 0.9.0<small>2018-07-06</small><a class="anchor" aria-label="anchor" href="#ggalluvial-090"></a></h2>
<div class="section level3">
<h3 id="geom_alluvium-patch-0-9-0">
<code>geom_alluvium()</code> patch<a class="anchor" aria-label="anchor" href="#geom_alluvium-patch-0-9-0"></a></h3>
<p>An occurrence of <code>weight</code> in <code><a href="../reference/geom_alluvium.html">geom_alluvium()</a></code> was not updated for v0.8.0 and caused <code><a href="../reference/geom_alluvium.html">geom_alluvium()</a></code> to throw an error in some cases. This has been corrected.</p>
</div>
<div class="section level3">
<h3 id="geom_flow-patch-0-9-0">
<code>geom_flow()</code> patch<a class="anchor" aria-label="anchor" href="#geom_flow-patch-0-9-0"></a></h3>
<p>An earlier solution to the z-ordering problem sufficed for matched layers (<code>*_alluvium()</code> and <code>*_flow()</code>) but failed for the combination of <code><a href="../reference/stat_alluvium.html">stat_alluvium()</a></code> with <code><a href="../reference/geom_flow.html">geom_flow()</a></code>. This is been corrected in the code for <code>GeomFlow$draw_panel()</code>, though a more elegant and general solution is preferred.</p>
</div>
<div class="section level3">
<h3 id="deprecated-parameters-removed-0-9-0">Deprecated parameters removed<a class="anchor" aria-label="anchor" href="#deprecated-parameters-removed-0-9-0"></a></h3>
<p>The deprecated parameters <code>axis_width</code> (all geom layers) and <code>ribbon_bend</code> (<code><a href="../reference/geom_alluvium.html">geom_alluvium()</a></code> and <code><a href="../reference/geom_flow.html">geom_flow()</a></code>) are removed and an explanatory note added to the layers’ documentation.</p>
</div>
<div class="section level3">
<h3 id="vignette-on-labeling-small-strata-0-9-0">Vignette on labeling small strata<a class="anchor" aria-label="anchor" href="#vignette-on-labeling-small-strata-0-9-0"></a></h3>
<p>A vignette illustrating two methods for labeling small strata, using other <strong>ggplot2</strong> extensions, is included.</p>
</div>
<div class="section level3">
<h3 id="self_adjoin-export-0-9-0">
<code>self_adjoin()</code> export<a class="anchor" aria-label="anchor" href="#self_adjoin-export-0-9-0"></a></h3>
<p>The internal function <code><a href="../reference/self-adjoin.html">self_adjoin()</a></code>, invoked by <code><a href="../reference/geom_flow.html">geom_flow()</a></code>, is revised, exported, documented, and exemplified.</p>
</div>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.8.0" id="ggalluvial-080">ggalluvial 0.8.0<a class="anchor" aria-label="anchor" href="#ggalluvial-080"></a></h2>
<div class="section level3">
<h3 id="stat-layer-functionality-0-8-0">Stat layer functionality<a class="anchor" aria-label="anchor" href="#stat-layer-functionality-0-8-0"></a></h3>
<ul><li>The <code>weight</code> aesthetic for the three <code>stat_*()</code> functions is replaced by the <code>y</code> aesthetic, so that <code><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html" class="external-link">scale_y_continuous()</a></code> will correctly transform the vertical scales of the layers. An example is provided in the documentation for <code><a href="../reference/stat_alluvium.html">stat_alluvium()</a></code>. <em>The <code>y</code> aesthetic must be present in order for scales to be correctly transformed.</em> The <code>weight</code> parameter is still available but deprecated.</li>
<li>For consistency with the switch from <code>weight</code> to <code>y</code>, the <code>aggregate.wts</code> parameter to <code><a href="../reference/stat_alluvium.html">stat_alluvium()</a></code> is replaced with <code>aggregate.y</code>; <code>aggregate.wts</code> is deprecated.</li>
</ul></div>
<div class="section level3">
<h3 id="alluvial-data-functionality-0-8-0">Alluvial data functionality<a class="anchor" aria-label="anchor" href="#alluvial-data-functionality-0-8-0"></a></h3>
<ul><li>Tests for alluvial format are silenced inside the <code>stat_*()</code> functions.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.7.0" id="ggalluvial-070">ggalluvial 0.7.0<a class="anchor" aria-label="anchor" href="#ggalluvial-070"></a></h2>
<div class="section level3">
<h3 id="alluvial-data-functionality-0-7-0">Alluvial data functionality<a class="anchor" aria-label="anchor" href="#alluvial-data-functionality-0-7-0"></a></h3>
<p>These changes make the functions that test for and convert between alluvial formats behave more like popular functions in the <strong>tidyverse</strong>. Some of the changes introduce backward incompatibilities, but most result in deprecation warnings.</p>
<ul><li>The functions <code>is_alluvial_*()</code> and <code>to_*()</code> are renamed to <code>is_*_form()</code> and <code>to_*_form()</code> for consistency. Their old names are deprecated.</li>
<li>
<code><a href="../reference/ggalluvial-deprecated.html">is_alluvial()</a></code> is deprecated and will be removed in a future version.</li>
<li>The parameter <code>logical</code> is deprecated. In a future version, the functions <code>is_*_form()</code> will only return logical values.</li>
<li>The setting <code>silent = TRUE</code> now silences all messages.</li>
<li>The functions <code>is_*_form()</code> now return <code>FALSE</code> if any weights are negative, with a message to this effect.</li>
<li>These functions now accept unquoted variable names for the <code>key</code>, <code>value</code>, <code>id</code>, <code>weight</code>, and <code>diffuse</code> parameters, using up-to-date <strong>rlang</strong> and <strong>tidyselect</strong> functionality.</li>
<li>The <code>axes</code> parameter in <code><a href="../reference/alluvial-data.html">is_alluvia_form()</a></code> and <code><a href="../reference/alluvial-data.html">to_lodes_form()</a></code> now accepts <code><a href="https://dplyr.tidyverse.org/reference/vars.html" class="external-link">dplyr::vars()</a></code> objects, as in <code><a href="https://dplyr.tidyverse.org/reference/select_all.html" class="external-link">dplyr::select_at()</a></code>. Alternatively, variables can be fed to these functions as in <code><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">dplyr::select()</a></code>, to be collected by <code>rlang::quos(...)</code> and used as axis variables. If <code>axes</code> is not <code>NULL</code>, then such additional arguments are ignored.</li>
<li>The functions <code>to_*_form()</code> now merge their internal reshapen data frames with the distilled or diffused variables in a consistent order, placing the distilled or diffused variables to the left.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.6.0" id="ggalluvial-060">ggalluvial 0.6.0<small>2018-02-04</small><a class="anchor" aria-label="anchor" href="#ggalluvial-060"></a></h2>
<div class="section level3">
<h3 id="cran-checks-for-v050-0-6-0">CRAN checks for v0.5.0<a class="anchor" aria-label="anchor" href="#cran-checks-for-v050-0-6-0"></a></h3>
<ul><li>The package now <code>Depends</code> on R <code>v3.3.0</code> (patch number zero) instead of <code>v3.3.1</code>. I’ve been unable to install this version locally, so there is a slight chance of incompatibility that i’ll be watchful for going forward.</li>
<li>The <strong>grid</strong> and <strong>alluvial</strong> packages are now <code>Suggests</code> rather than <code>Imports</code>.</li>
</ul></div>
<div class="section level3">
<h3 id="alluvial-data-functionality-0-6-0">Alluvial data functionality<a class="anchor" aria-label="anchor" href="#alluvial-data-functionality-0-6-0"></a></h3>
<ul><li>Source files and documentation for <code>is_alluvial_*()</code> and <code>to_*()</code> functions are combined; see <code><a href="../reference/alluvial-data.html">help("alluvial-data")</a></code>.</li>
<li>
<code>is_alluvial_alluvia</code> now prints a message rather than a warning when some combinations of strata are not linked by any alluvia.</li>
<li>
<code><a href="../reference/ggalluvial-deprecated.html">to_lodes()</a></code> now has a <code>diffuse</code> parameter to join any original variables to the reformatted data by the <code>id</code> variable (alluvium). This makes it possible to assign original variables to aesthetics after reformatting, as illustrated in a new example.</li>
<li>
<code><a href="../reference/ggalluvial-deprecated.html">to_alluvia()</a></code> now has a <code>distill</code> parameter to control the inclusion of any original variables that vary within values of <code>id</code> into the reformatted data, based on a distilling function that returns a single value from a vector.</li>
<li>
<code><a href="../reference/ggalluvial-deprecated.html">to_lodes()</a></code> now has a logical <code>discern</code> parameter that uses <code><a href="https://rdrr.io/r/base/make.unique.html" class="external-link">make.unique()</a></code> to make stratum values that appear at different axes distinct. The <code>stat_*()</code> functions can pass the same parameter internally and print a warning if the data is already in lodes form.</li>
</ul></div>
<div class="section level3">
<h3 id="layer-internals-0-6-0">Layer internals<a class="anchor" aria-label="anchor" href="#layer-internals-0-6-0"></a></h3>
<ul><li>
<code>GeomFlow$draw_panel()</code> now begins by restricting to <code><a href="https://rdrr.io/r/stats/complete.cases.html" class="external-link">complete.cases()</a></code>, corresponding to flows with both starting and terminating axes. (This is not done in <code>StatFlow$compute_panel()</code>, which would have the effect of excluding missing aesthetic values from legends.)</li>
<li>
<code>GeomAlluvium$setup_data()</code> now throws a warning if some color or differentiation aesthetics vary within alluvia.</li>
<li>A bug in the processing of a custom <code>lode.ordering</code> argument by <code>StatAlluvium$compute_panel()</code> has been fixed.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.5.0" id="ggalluvial-050">ggalluvial 0.5.0<small>2017-11-26</small><a class="anchor" aria-label="anchor" href="#ggalluvial-050"></a></h2>
<div class="section level3">
<h3 id="backward-incompatibilities-0-5-0">Backward incompatibilities<a class="anchor" aria-label="anchor" href="#backward-incompatibilities-0-5-0"></a></h3>
<p>The <code><a href="../reference/ggalluvial-package.html">ggalluvial()</a></code> shortcut function, which included a formula interface, deprecated in version 0.4.0, is removed.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>

</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Jason Cory Brunson, Quentin D. Read.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

